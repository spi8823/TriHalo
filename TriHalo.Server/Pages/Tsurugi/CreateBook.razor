@page "/CreateBook"

@using TriHalo.API.Service
@using TriHalo.Common.Tsurugi;
@code
{
    private TsurugiService service = new TsurugiService();
    async Task TestAsync()
    {
        var books = await service.GetBooks();
        Console.WriteLine(books.Count);
    }

    protected override async Task OnInitAsync()
    {
        var book = new Book()
        {
            Title = new Common.Text()
            {
                Original = "asdf",
                Ruby = "asdfasdf"
            },
            ReferenceURL = "aaaaaaa",
        };
        await service.PostBook(book);
        var books = await service.GetBooks();
        Console.WriteLine(books.Count);
        await base.OnInitAsync();
    }
}
@{ 
}

<button @onclick="TestAsync"/>